<div class="dialog">
  <h1 mat-dialog-title>Reservation</h1>
  <div mat-dialog-content>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <mat-form-field class="mb-3 col-12">
        <mat-label>Problem Description</mat-label>
        <textarea
          rows="3"
          placeholder="Enter Problem Description"
          matInput
          formControlName="problemDescription"
          required
          >
        </textarea>
      </mat-form-field>
      <div class="form-check form-switch mb-3">
        <input
          class="form-check-input"
          type="checkbox"
          role="switch"
          id="flexSwitchCheckDefault"
          (change)="onAddressInputChange()"
          >
        <label class="form-check-label" for="flexSwitchCheckDefault">Add Address For Reservation</label>
      </div>
      @if(isAddressChecked()){
        <div class="row p-3" formGroupName="address">
          <h4 class="mb-3">Address</h4>
          <mat-form-field class="col-4 mb-4">
            <mat-label>Country</mat-label>
            <input
              matInput
              placeholder="Country"
              type="text"
              formControlName="country"
              required
              >
          </mat-form-field>
          <mat-form-field class="col-4 mb-4">
            <mat-label>City</mat-label>
            <input
              matInput
              placeholder="City"
              type="text"
              formControlName="city"
              required
              >
          </mat-form-field>
          <mat-form-field class="col-4 mb-4">
            <mat-label>Street</mat-label>
            <input
              matInput
              placeholder="Street"
              type="text"
              formControlName="street"
              required
              >
          </mat-form-field>
        </div>
      }
      <div class="form-check form-switch mb-3">
        <input
          class="form-check-input"
          type="checkbox"
          role="switch"
          id="flexSwitchCheckChecked"
          [checked]="!isNotForMe()"
          (change)="onForMeInputChange()"
          >
        <label class="form-check-label" for="flexSwitchCheckChecked">For Me</label>
      </div>
      @if(isNotForMe()) {
        <div class="row p-3" formGroupName="contact">
          <h4 class="mb-3">Contact Info</h4>
          <mat-form-field class="col-6 mb-4">
            <mat-label>First Name</mat-label>
            <input
              matInput
              placeholder="First Name"
              type="text"
              formControlName="firstName"
              required
              >
          </mat-form-field>
          <mat-form-field class="col-6 mb-4">
            <mat-label>Last Name</mat-label>
            <input
              matInput
              placeholder="Last Name"
              type="text"
              formControlName="lastName"
              required
              >
          </mat-form-field>
          <mat-form-field class="mb-4">
            <mat-label>Phone Number</mat-label>
            <input
              matInput
              placeholder="Phone Number"
              type="text"
              formControlName="phoneNumber"
              required
              >
          </mat-form-field>
        </div>
      }
      <div mat-dialog-actions>
        <button class="btn bg-main-primary text-light me-4" type="button" (click)="dialog.close(false)">Cancel</button>
        <button
          class="btn btn-bg-org text-light"
          type="submit"
          [disabled]="form.invalid"
          >
          Reservation
        </button>
      </div>
    </form>
  </div>
</div>
